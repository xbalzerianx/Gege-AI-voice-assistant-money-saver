<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gege - AI Voice Money Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src='https://unpkg.com/tesseract.js@4.1.1/dist/tesseract.min.js'></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Nunito', sans-serif; }
        body { background: #F5E6C8; }
        .phone { width: 375px; height: 812px; background: #FFFBF0; border-radius: 45px; box-shadow: 0 25px 60px rgba(0,0,0,0.2), 0 0 0 12px #1a1a1a; overflow: hidden; position: relative; margin: 0 auto; }
        .screen { width: 100%; height: 100%; overflow-y: auto; background: #FFFBF0; }
        .screen::-webkit-scrollbar { display: none; }
        .card { border-radius: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .nav { position: absolute; bottom: 20px; left: 20px; right: 20px; height: 70px; background: #1a1a1a; border-radius: 35px; display: flex; justify-content: space-around; align-items: center; }
        .nav-item { width: 50px; height: 50px; border-radius: 16px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; }
        .nav-item.active { background: #F4D03F; }
        .nav-item.active svg { color: #1a1a1a; }
        .nav-item:not(.active) svg { color: #888; }
        .page { display: none; padding: 20px; padding-bottom: 120px; }
        .page.active { display: block; }
        .avatar { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 18px; color: white; border: 3px solid white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .badge-sent { background: #FFB6C1; color: #C71585; padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 13px; }
        .badge-received { background: #90EE90; color: #228B22; padding: 6px 14px; border-radius: 20px; font-weight: 600; font-size: 13px; }
        .btn-yellow { background: #F4D03F; color: #1a1a1a; padding: 14px 24px; border-radius: 20px; font-weight: 700; box-shadow: 0 4px 15px rgba(244, 208, 63, 0.4); }
        .btn-pink { background: #E8A0BF; color: white; padding: 14px 24px; border-radius: 20px; font-weight: 700; }
        @keyframes pulse-ring { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.5); opacity: 0; } }
        .voice-ring { position: absolute; width: 160px; height: 160px; border-radius: 50%; background: #F4D03F; animation: pulse-ring 1.5s infinite; }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 100; justify-content: center; align-items: flex-end; }
        .modal.active { display: flex; }
        .modal-content { background: #FFFBF0; border-radius: 30px 30px 0 0; width: 100%; max-height: 85%; overflow-y: auto; padding: 24px; }
        .ocr-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(26,26,26,0.95); z-index: 150; display: none; flex-direction: column; align-items: center; justify-content: center; }
        .ocr-overlay.active { display: flex; }
        .scan-line { width: 80%; height: 2px; background: #F4D03F; box-shadow: 0 0 10px #F4D03F; animation: scan 2s infinite; }
        @keyframes scan { 0%, 100% { transform: translateY(-100px); opacity: 0; } 50% { transform: translateY(100px); opacity: 1; } }
        .toast { position: fixed; top: 50px; left: 50%; transform: translateX(-50%) translateY(-100px); background: #1a1a1a; color: white; padding: 14px 28px; border-radius: 30px; font-weight: 600; opacity: 0; transition: all 0.3s; z-index: 200; }
        .toast.show { transform: translateX(-50%) translateY(0); opacity: 1; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="phone">
        <div class="screen">
            <!-- Dashboard -->
            <div id="dashboard" class="page active">
                <div class="flex justify-between items-center mb-6">
                    <div><p class="text-2xl font-bold text-gray-800">Hello, Boss! <span class="text-3xl">üëã</span></p></div>
                    <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">B</div>
                </div>
                <div class="card bg-white p-6 mb-5">
                    <p class="text-gray-500 text-sm mb-1">Your Balance</p>
                    <p class="text-4xl font-extrabold text-gray-800 mb-4">$45,230.50</p>
                    <div class="flex gap-3">
                        <button onclick="startVoiceFlow()" class="btn-yellow flex-1 flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                            "Hey Gege"
                        </button>
                        <button onclick="startCameraFlow()" class="btn-pink flex-1 flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path></svg>
                            Camera
                        </button>
                    </div>
                </div>
                <p class="text-lg font-bold text-gray-800 mb-4">Send Again</p>
                <div class="flex gap-4 mb-6 overflow-x-auto pb-2">
                    <div class="flex flex-col items-center min-w-[70px] cursor-pointer" onclick="openAddModal()">
                        <div class="w-14 h-14 rounded-full bg-gray-800 flex items-center justify-center mb-2 shadow-lg"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div>
                        <span class="text-xs font-semibold text-gray-600">New</span>
                    </div>
                    <div class="flex flex-col items-center min-w-[70px]"><div class="avatar" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">S</div><span class="text-xs font-semibold text-gray-600 mt-2">Sarah</span></div>
                    <div class="flex flex-col items-center min-w-[70px]"><div class="avatar" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">J</div><span class="text-xs font-semibold text-gray-600 mt-2">John</span></div>
                    <div class="flex flex-col items-center min-w-[70px]"><div class="avatar" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">M</div><span class="text-xs font-semibold text-gray-600 mt-2">Mike</span></div>
                </div>
                <div class="flex justify-between items-center mb-4">
                    <p class="text-lg font-bold text-gray-800">Recent</p>
                    <span class="text-sm font-semibold text-gray-500 cursor-pointer" onclick="navigate('transactions')">See all</span>
                </div>
                <div id="transactionList" class="space-y-3"></div>
            </div>

            <!-- History -->
            <div id="transactions" class="page">
                <div class="flex justify-between items-center mb-6"><p class="text-2xl font-bold text-gray-800">History</p></div>
                <div id="allTransactions" class="space-y-3"></div>
            </div>

            <!-- Voice -->
            <div id="voice" class="page">
                <div class="flex flex-col items-center justify-center h-full pt-20">
                    <div class="relative mb-8">
                        <div id="ring1" class="voice-ring hidden"></div>
                        <div id="ring2" class="voice-ring hidden" style="animation-delay: 0.5s"></div>
                        <button id="micBtn" onclick="toggleListening()" class="w-40 h-40 rounded-full bg-gray-800 flex items-center justify-center shadow-2xl relative z-10">
                            <svg id="micIcon" class="w-16 h-16 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg>
                        </button>
                    </div>
                    <p id="voiceText" class="text-xl font-bold text-gray-800 mb-2">Tap to say "Hey Gege"</p>
                    <p id="voiceSub" class="text-sm text-gray-500">Or "Hey Siri, open Gege"</p>
                </div>
            </div>

            <!-- Settings -->
            <div id="settings" class="page">
                <div class="flex justify-between items-center mb-6"><p class="text-2xl font-bold text-gray-800">Settings</p></div>
                <div class="card bg-white p-4 mb-4 flex items-center gap-4">
                    <div class="avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">B</div>
                    <div class="flex-1"><p class="font-bold text-gray-800">Boss</p><p class="text-sm text-gray-500">boss@gege.app</p></div>
                </div>
                <div class="space-y-3">
                    <button onclick="exportData()" class="card bg-white p-4 w-full flex items-center justify-between"><span class="font-semibold text-gray-700">üì§ Export</span><svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>
                    <button onclick="clearData()" class="card bg-red-50 p-4 w-full flex items-center justify-between"><span class="font-semibold text-red-500">üóëÔ∏è Clear All</span><svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></button>
                </div>
                <p class="text-center text-xs text-gray-400 mt-8">Gege v2.0 üöÄ</p>
            </div>
        </div>

        <!-- Bottom Nav -->
        <div class="nav">
            <div class="nav-item active" onclick="navigate('dashboard')"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg></div>
            <div class="nav-item" onclick="navigate('transactions')"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div>
            <div class="nav-item" onclick="navigate('voice')"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg></div>
            <div class="nav-item" onclick="navigate('settings')"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div>
        </div>
    </div>

    <!-- OCR Overlay -->
    <div id="ocrOverlay" class="ocr-overlay">
        <p class="text-yellow-400 text-xl font-bold mb-4">üîç AI Analyzing...</p>
        <div class="w-64 h-40 border-2 border-yellow-400 rounded-xl relative overflow-hidden mb-4"><div class="scan-line"></div></div>
        <p id="ocrText" class="text-white text-sm">Reading screen...</p>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"><span id="toastMsg"></span></div>

    <script>
        // Data
        let transactions = JSON.parse(localStorage.getItem('gege_v2')) || [
            { id: '1', type: 'sent', amount: 45, currency: 'USD', recipient: 'Sarah', app: 'PayPal', date: new Date().toISOString() },
            { id: '2', type: 'received', amount: 2500, currency: 'PHP', recipient: 'John', app: 'GCash', date: new Date().toISOString() },
        ];
        let listening = false;
        let worker = null;

        // Init
        document.addEventListener('DOMContentLoaded', () => {
            renderTransactions();
            initTesseract();
        });

        async function initTesseract() {
            try {
                worker = await Tesseract.createWorker('eng');
                console.log('Tesseract ready');
            } catch(e) {
                console.log('Tesseract init delayed');
            }
        }

        // Navigation
        function navigate(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(page).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            event.currentTarget.classList.add('active');
            if (page === 'transactions') renderAllTransactions();
        }

        // Render
        function renderTransactions() {
            const list = document.getElementById('transactionList');
            const recent = transactions.slice(0, 5);
            list.innerHTML = recent.map(tx => createTxHTML(tx)).join('');
        }

        function renderAllTransactions() {
            const list = document.getElementById('allTransactions');
            list.innerHTML = transactions.map(tx => createTxHTML(tx)).join('');
        }

        function createTxHTML(tx) {
            const isSent = tx.type === 'sent';
            return `
                <div class="card bg-white p-4 flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold" style="background: ${isSent ? '#FFB6C1' : '#90EE90'}; color: ${isSent ? '#C71585' : '#228B22'}">${tx.recipient[0]}</div>
                        <div>
                            <p class="font-bold text-gray-800">${tx.app} ‚Ä¢ ${tx.recipient}</p>
                            <p class="text-xs text-gray-400">${formatDate(tx.date)}</p>
                        </div>
                    </div>
                    <span class="${isSent ? 'badge-sent' : 'badge-received'}">${isSent ? '-' : '+'}${formatMoney(tx.amount, tx.currency)}</span>
                </div>
            `;
        }

        // Voice Flow
        async function startVoiceFlow() {
            navigate('voice');
            setTimeout(toggleListening, 300);
        }

        async function toggleListening() {
            if (listening) return;
            listening = true;
            
            const btn = document.getElementById('micBtn');
            const icon = document.getElementById('micIcon');
            const text = document.getElementById('voiceText');
            const sub = document.getElementById('voiceSub');
            
            // Active state
            btn.classList.add('bg-yellow-400');
            btn.classList.remove('bg-gray-800');
            icon.classList.remove('text-yellow-400');
            icon.classList.add('text-gray-800');
            document.getElementById('ring1').classList.remove('hidden');
            document.getElementById('ring2').classList.remove('hidden');
            text.textContent = 'Listening...';
            
            // "Yes!" response
            await wait(1500);
            text.textContent = 'Yes! üëã';
            
            // Shutter sound + OCR
            await wait(500);
            playShutter();
            document.getElementById('ocrOverlay').classList.add('active');
            
            // Simulate OCR
            await wait(2000);
            document.getElementById('ocrText').textContent = 'Found: $45.00 to Sarah via PayPal';
            await wait(1500);
            document.getElementById('ocrOverlay').classList.remove('active');
            
            // Add transaction
            addTx({ type: 'sent', amount: 45, currency: 'USD', recipient: 'Sarah', app: 'PayPal' });
            
            // Reset
            btn.classList.remove('bg-yellow-400');
            btn.classList.add('bg-gray-800');
            icon.classList.add('text-yellow-400');
            icon.classList.remove('text-gray-800');
            document.getElementById('ring1').classList.add('hidden');
            document.getElementById('ring2').classList.add('hidden');
            text.textContent = 'Tap to say "Hey Gege"';
            sub.textContent = '‚úì Logged! Sent $45 to Sarah';
            listening = false;
            
            setTimeout(() => {
                sub.textContent = 'Or "Hey Siri, open Gege"';
                navigate('dashboard');
            }, 2000);
        }

        // Camera Flow
        async function startCameraFlow() {
            navigate('voice');
            document.getElementById('voiceText').textContent = 'Camera Mode üì∑';
            document.getElementById('voiceSub').textContent = 'Point at receipt...';
            
            await wait(1000);
            document.getElementById('ocrOverlay').classList.add('active');
            document.getElementById('ocrText').textContent = 'Analyzing receipt...';
            
            await wait(2500);
            document.getElementById('ocrText').textContent = 'Found: $28.50 at Starbucks';
            
            await wait(1500);
            document.getElementById('ocrOverlay').classList.remove('active');
            
            addTx({ type: 'sent', amount: 28.50, currency: 'USD', recipient: 'Starbucks', app: 'Card' });
            
            document.getElementById('voiceSub').textContent = '‚úì Logged! $28.50 at Starbucks';
            
            setTimeout(() => navigate('dashboard'), 2000);
        }

        // Transaction functions
        function addTx(data) {
            const tx = { id: Date.now().toString(), ...data, date: new Date().toISOString() };
            transactions.unshift(tx);
            localStorage.setItem('gege_v2', JSON.stringify(transactions));
            renderTransactions();
            showToast('Transaction added! ‚úì');
        }

        function openAddModal() {
            const amount = prompt('Amount:');
            if (!amount) return;
            const recipient = prompt('To/From:');
            if (!recipient) return;
            addTx({ type: 'sent', amount: parseFloat(amount), currency: 'USD', recipient, app: 'Manual' });
        }

        // Utils
        function formatMoney(amount, currency) {
            const symbols = { USD: '$', PHP: '‚Ç±', CAD: 'CA$', EUR: '‚Ç¨' };
            return (symbols[currency] || '$') + amount.toFixed(2);
        }

        function formatDate(date) {
            const d = new Date(date);
            const now = new Date();
            const diff = now - d;
            if (diff < 86400000) return 'Today';
            if (diff < 172800000) return 'Yesterday';
            return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        }

        function wait(ms) {
            return new Promise(r => setTimeout(r, ms));
        }

        function playShutter() {
            // Simulated shutter sound
            const audio = new Audio();
            audio.src = 'data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=';
            audio.play().catch(() => {});
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMsg').textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function exportData() {
            const data = JSON.stringify(transactions, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'gege-transactions.json';
            a.click();
            showToast('Exported! üì§');
        }

        function clearData() {
            if (confirm('Clear all data?')) {
                transactions = [];
                localStorage.setItem('gege_v2', JSON.stringify(transactions));
                renderTransactions();
                showToast('Cleared! üóëÔ∏è');
            }
        }
    </script>
</body>
</html>
